{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/enesbayraktar/Workspace/sistemgranit/actions/categories/get-categories.ts"],"sourcesContent":["\"use server\";\n\nimport { createClient } from \"@/supabase/server\";\n\nexport async function getCategories() {\n  const supabase = await createClient();\n  const { data, error } = await supabase\n    .from(\"categories\")\n    .select(\"*\")\n    .order(\"name\");\n\n  if (error) {\n    throw new Error(error.message);\n  }\n\n  return data;\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,kIAAY;IACnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,cACL,MAAM,CAAC,KACP,KAAK,CAAC;IAET,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,MAAM,OAAO;IAC/B;IAEA,OAAO;AACT;;;IAZsB;;AAAA,+OAAA"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///Users/enesbayraktar/Workspace/sistemgranit/app/validations/category.ts"],"sourcesContent":["import { z } from \"zod\";\n\nexport const categorySchema = z.object({\n  name: z\n    .string()\n    .min(2, \"En az 2 karakter\")\n    .max(255)\n    .min(1, \"Kategori adı zorunludur\"),\n  slug: z\n    .string()\n    .min(1, \"URL (Slug) zorunludur\")\n    .regex(\n      /^[a-z0-9-]+$/,\n      \"Sadece küçük harf, rakam ve tire (-) kullanılabilir\",\n    ),\n  description: z.string().nullable().optional(),\n  image_url: z.string().nullable().optional(),\n  seo_title: z\n    .string()\n    .max(70, \"SEO başlığı 70 karakterden fazla olamaz\")\n    .nullable()\n    .optional(),\n  seo_description: z\n    .string()\n    .max(160, \"SEO açıklaması 160 karakterden fazla olamaz\")\n    .nullable()\n    .optional(),\n});\n\nexport const updateCategorySchema = categorySchema.extend({\n  id: z.string().uuid(\"Geçersiz Kategori ID\"),\n});\n\nexport type CategoryFormValues = z.infer<typeof categorySchema>;\nexport type UpdateCategoryInput = z.infer<typeof updateCategorySchema>;\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,iBAAiB,kLAAC,CAAC,MAAM,CAAC;IACrC,MAAM,kLAAC,CACJ,MAAM,GACN,GAAG,CAAC,GAAG,oBACP,GAAG,CAAC,KACJ,GAAG,CAAC,GAAG;IACV,MAAM,kLAAC,CACJ,MAAM,GACN,GAAG,CAAC,GAAG,yBACP,KAAK,CACJ,gBACA;IAEJ,aAAa,kLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IAC3C,WAAW,kLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IACzC,WAAW,kLAAC,CACT,MAAM,GACN,GAAG,CAAC,IAAI,2CACR,QAAQ,GACR,QAAQ;IACX,iBAAiB,kLAAC,CACf,MAAM,GACN,GAAG,CAAC,KAAK,+CACT,QAAQ,GACR,QAAQ;AACb;AAEO,MAAM,uBAAuB,eAAe,MAAM,CAAC;IACxD,IAAI,kLAAC,CAAC,MAAM,GAAG,IAAI,CAAC;AACtB"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///Users/enesbayraktar/Workspace/sistemgranit/actions/categories/create-category.ts"],"sourcesContent":["\"use server\";\n\nimport { createClient } from \"@/supabase/server\";\nimport { revalidatePath } from \"next/cache\";\nimport { categorySchema } from \"@/app/validations/category\";\nimport { z } from \"zod\";\n\nexport type CreateCategoryInput = z.infer<typeof categorySchema>;\n\nexport async function createCategory(input: CreateCategoryInput) {\n  const result = categorySchema.safeParse(input);\n\n  if (!result.success) {\n    return {\n      success: false,\n      error: \"Geçersiz veri girişi\",\n    };\n  }\n\n  const supabase = await createClient();\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return {\n      success: false,\n      error: \"Yetkisiz işlem. Lütfen giriş yapın.\",\n    };\n  }\n\n  // Check unique slug manually just to be safe (DB also has unique constraint)\n  const { data: existing } = await supabase\n    .from(\"categories\")\n    .select(\"id\")\n    .eq(\"slug\", input.slug)\n    .single();\n\n  if (existing) {\n    return {\n      success: false,\n      error: \"Bu URL (slug) zaten kullanımda.\",\n    };\n  }\n\n  const { error } = await supabase.from(\"categories\").insert({\n    name: input.name,\n    slug: input.slug,\n    description: input.description,\n    image_url: input.image_url,\n    seo_title: input.seo_title,\n    seo_description: input.seo_description,\n  });\n\n  if (error) {\n    return {\n      success: false,\n      error: error.message,\n    };\n  }\n\n  revalidatePath(\"/dashboard/categories\");\n\n  return {\n    success: true,\n  };\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;;AAKO,eAAe,eAAe,KAA0B;IAC7D,MAAM,SAAS,gJAAc,CAAC,SAAS,CAAC;IAExC,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,MAAM,WAAW,MAAM,IAAA,kIAAY;IACnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM;QACT,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,6EAA6E;IAC7E,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,SAC9B,IAAI,CAAC,cACL,MAAM,CAAC,MACP,EAAE,CAAC,QAAQ,MAAM,IAAI,EACrB,MAAM;IAET,IAAI,UAAU;QACZ,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,cAAc,MAAM,CAAC;QACzD,MAAM,MAAM,IAAI;QAChB,MAAM,MAAM,IAAI;QAChB,aAAa,MAAM,WAAW;QAC9B,WAAW,MAAM,SAAS;QAC1B,WAAW,MAAM,SAAS;QAC1B,iBAAiB,MAAM,eAAe;IACxC;IAEA,IAAI,OAAO;QACT,OAAO;YACL,SAAS;YACT,OAAO,MAAM,OAAO;QACtB;IACF;IAEA,IAAA,+IAAc,EAAC;IAEf,OAAO;QACL,SAAS;IACX;AACF;;;IAzDsB;;AAAA,+OAAA"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///Users/enesbayraktar/Workspace/sistemgranit/actions/categories/update-category.ts"],"sourcesContent":["\"use server\";\n\nimport { createClient } from \"@/supabase/server\";\nimport { revalidatePath } from \"next/cache\";\nimport {\n  updateCategorySchema,\n  UpdateCategoryInput,\n} from \"@/app/validations/category\";\n\nexport async function updateCategory(input: UpdateCategoryInput) {\n  const result = updateCategorySchema.safeParse(input);\n\n  if (!result.success) {\n    return {\n      success: false,\n      error: \"Geçersiz veri girişi\",\n    };\n  }\n\n  const supabase = await createClient();\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return {\n      success: false,\n      error: \"Yetkisiz işlem. Lütfen giriş yapın.\",\n    };\n  }\n\n  // Slug değiştiyse unique kontrolü\n  const { data: existing } = await supabase\n    .from(\"categories\")\n    .select(\"id\")\n    .eq(\"slug\", input.slug)\n    .neq(\"id\", input.id) // Kendisi hariç\n    .single();\n\n  if (existing) {\n    return {\n      success: false,\n      error: \"Bu URL (slug) zaten kullanımda.\",\n    };\n  }\n\n  const { error } = await supabase\n    .from(\"categories\")\n    .update({\n      name: input.name,\n      slug: input.slug,\n      description: input.description,\n      image_url: input.image_url,\n      seo_title: input.seo_title,\n      seo_description: input.seo_description,\n      updated_at: new Date().toISOString(),\n    })\n    .eq(\"id\", input.id);\n\n  if (error) {\n    return {\n      success: false,\n      error: error.message,\n    };\n  }\n\n  revalidatePath(\"/dashboard/categories\");\n\n  return {\n    success: true,\n  };\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;;AAKO,eAAe,eAAe,KAA0B;IAC7D,MAAM,SAAS,sJAAoB,CAAC,SAAS,CAAC;IAE9C,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,MAAM,WAAW,MAAM,IAAA,kIAAY;IACnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM;QACT,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,kCAAkC;IAClC,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,SAC9B,IAAI,CAAC,cACL,MAAM,CAAC,MACP,EAAE,CAAC,QAAQ,MAAM,IAAI,EACrB,GAAG,CAAC,MAAM,MAAM,EAAE,EAAE,gBAAgB;KACpC,MAAM;IAET,IAAI,UAAU;QACZ,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,cACL,MAAM,CAAC;QACN,MAAM,MAAM,IAAI;QAChB,MAAM,MAAM,IAAI;QAChB,aAAa,MAAM,WAAW;QAC9B,WAAW,MAAM,SAAS;QAC1B,WAAW,MAAM,SAAS;QAC1B,iBAAiB,MAAM,eAAe;QACtC,YAAY,IAAI,OAAO,WAAW;IACpC,GACC,EAAE,CAAC,MAAM,MAAM,EAAE;IAEpB,IAAI,OAAO;QACT,OAAO;YACL,SAAS;YACT,OAAO,MAAM,OAAO;QACtB;IACF;IAEA,IAAA,+IAAc,EAAC;IAEf,OAAO;QACL,SAAS;IACX;AACF;;;IA9DsB;;AAAA,+OAAA"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///Users/enesbayraktar/Workspace/sistemgranit/actions/categories/delete-category.ts"],"sourcesContent":["\"use server\";\n\nimport { createClient } from \"@/supabase/server\";\nimport { revalidatePath } from \"next/cache\";\n\nexport async function deleteCategory(id: string) {\n  const supabase = await createClient();\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return {\n      success: false,\n      error: \"Yetkisiz işlem. Lütfen giriş yapın.\",\n    };\n  }\n\n  // Bağlı ürün kontrolü\n  const { count, error: countError } = await supabase\n    .from(\"products\")\n    .select(\"id\", { count: \"exact\", head: true })\n    .eq(\"category_id\", id);\n\n  if (countError) {\n    return {\n      success: false,\n      error: \"Ürün kontrolü yapılamadı.\",\n    };\n  }\n\n  if (count && count > 0) {\n    return {\n      success: false,\n      error: `Bu kategoriye bağlı ${count} adet ürün var. Önce ürünleri başka kategoriye taşıyın veya silin.`,\n    };\n  }\n\n  const { error } = await supabase.from(\"categories\").delete().eq(\"id\", id);\n\n  if (error) {\n    return {\n      success: false,\n      error: error.message,\n    };\n  }\n\n  revalidatePath(\"/dashboard/categories\");\n\n  return {\n    success: true,\n  };\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;AAEO,eAAe,eAAe,EAAU;IAC7C,MAAM,WAAW,MAAM,IAAA,kIAAY;IACnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM;QACT,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,sBAAsB;IACtB,MAAM,EAAE,KAAK,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SACxC,IAAI,CAAC,YACL,MAAM,CAAC,MAAM;QAAE,OAAO;QAAS,MAAM;IAAK,GAC1C,EAAE,CAAC,eAAe;IAErB,IAAI,YAAY;QACd,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,IAAI,SAAS,QAAQ,GAAG;QACtB,OAAO;YACL,SAAS;YACT,OAAO,CAAC,oBAAoB,EAAE,MAAM,kEAAkE,CAAC;QACzG;IACF;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,cAAc,MAAM,GAAG,EAAE,CAAC,MAAM;IAEtE,IAAI,OAAO;QACT,OAAO;YACL,SAAS;YACT,OAAO,MAAM,OAAO;QACtB;IACF;IAEA,IAAA,+IAAc,EAAC;IAEf,OAAO;QACL,SAAS;IACX;AACF;;;IA/CsB;;AAAA,+OAAA"}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":["file:///Users/enesbayraktar/Workspace/sistemgranit/actions/categories/get-category-by-id.ts"],"sourcesContent":["\"use server\";\n\nimport { createClient } from \"@/supabase/server\";\n\nexport async function getCategoryById(id: string) {\n  const supabase = await createClient();\n  const { data, error } = await supabase\n    .from(\"categories\")\n    .select(\"*\")\n    .eq(\"id\", id)\n    .single();\n\n  if (error) {\n    return null;\n  }\n\n  return data;\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;AAEO,eAAe,gBAAgB,EAAU;IAC9C,MAAM,WAAW,MAAM,IAAA,kIAAY;IACnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,IACT,MAAM;IAET,IAAI,OAAO;QACT,OAAO;IACT;IAEA,OAAO;AACT;;;IAbsB;;AAAA,+OAAA"}},
    {"offset": {"line": 269, "column": 0}, "map": {"version":3,"sources":["file:///Users/enesbayraktar/Workspace/sistemgranit/app/utils/slug-redirect.ts"],"sourcesContent":["\"use server\";\n\nimport { createClient } from \"@/supabase/server\";\nimport type { Tables } from \"@/supabase/database.types\";\n\ntype Product = Tables<\"products\">;\n\ninterface ResolveResult {\n  found: boolean;\n  redirect?: string;\n  product?: Product;\n}\n\nexport async function resolveSlugWithRedirect(\n  slug: string,\n): Promise<ResolveResult> {\n  const supabase = await createClient();\n\n  const { data: product } = await supabase\n    .from(\"products\")\n    .select(\"*\")\n    .eq(\"slug\", slug)\n    .single();\n\n  if (product) {\n    return { found: true, product };\n  }\n\n  const { data: history } = await supabase\n    .from(\"slug_history\")\n    .select(\"new_slug\")\n    .eq(\"old_slug\", slug)\n    .order(\"created_at\", { ascending: false })\n    .limit(1)\n    .single();\n\n  if (history) {\n    return { found: true, redirect: history.new_slug };\n  }\n\n  return { found: false };\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;AAWO,eAAe,wBACpB,IAAY;IAEZ,MAAM,WAAW,MAAM,IAAA,kIAAY;IAEnC,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,QAAQ,MACX,MAAM;IAET,IAAI,SAAS;QACX,OAAO;YAAE,OAAO;YAAM;QAAQ;IAChC;IAEA,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,gBACL,MAAM,CAAC,YACP,EAAE,CAAC,YAAY,MACf,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM,GACvC,KAAK,CAAC,GACN,MAAM;IAET,IAAI,SAAS;QACX,OAAO;YAAE,OAAO;YAAM,UAAU,QAAQ,QAAQ;QAAC;IACnD;IAEA,OAAO;QAAE,OAAO;IAAM;AACxB;;;IA5BsB;;AAAA,+OAAA"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///Users/enesbayraktar/Workspace/sistemgranit/.next-internal/server/app/%5Blocale%5D/dashboard/categories/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getCategories as '0038bce317a2a57066ecf2ba8a75e64fe59efcfbcb'} from 'ACTIONS_MODULE0'\nexport {createCategory as '40b814a6ec7363b852546fc9ff000a8458441e5878'} from 'ACTIONS_MODULE1'\nexport {updateCategory as '40e22fb17e1ecb14d84009a4b55a100bd219e0c2f7'} from 'ACTIONS_MODULE2'\nexport {deleteCategory as '40f7c0309a9a1c20d90f72008e87f8f215395b13be'} from 'ACTIONS_MODULE3'\nexport {getCategoryById as '409cfbae81cb8f69fe4ebb6b0b760ec92745f84a59'} from 'ACTIONS_MODULE4'\nexport {resolveSlugWithRedirect as '4022e5374ea159f3545f609cad69b1314fa818c2e8'} from 'ACTIONS_MODULE5'\nexport {deleteCategory as '40f7c0309a9a1c20d90f72008e87f8f215395b13be'} from 'ACTIONS_MODULE3'\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA"}}]
}